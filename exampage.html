<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trang bài thi</title>
  <link rel="stylesheet" href="./style_exampage.css">
</head>

<body>
  <header>
    <a href="">
      <img class="logo-image" src="./assets/logo-ptit.png" alt="">
    </a>
    <div class="profile">
      <a href="#" class="userProfile">Ho so</a>
    </div>
  </header>

  <main>
    <h1>Bài thi</h1>
    <!-- Timer -->
    <div id="timer">
      <span class="timer-label">Thời gian còn lại:</span>
      <div id="countdown"></div>
    </div>

    <div id="questions">
      <!-- Các câu hỏi sẽ được thêm vào đây -->
    </div>
    <button id="submit" onclick="submit()">Nộp bài</button>
    <div id="result">
      <p>Điểm của bạn là: <strong>00</strong></p>
    </div>
  </main>

  <script>
    // JavaScript logic
    const questions = [
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 2: Đây là câu hỏi số hai?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 1
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      },
      {
        question: "Câu hỏi 1: Đây là câu hỏi số một?",
        options: ["Đáp án A", "Đáp án B", "Đáp án C"],
        answer: 0 // Index của đáp án đúng trong mảng options
      }

      // Thêm câu hỏi khác nếu cần
    ];

    let timeLeft = 1200; // Thời gian tính bằng giây (300s = 5 phút)

    function renderQuestions() {
      const questionsContainer = document.getElementById('questions');
      questions.forEach((q, index) => {
        const questionElement = document.createElement('div');
        questionElement.classList.add('question');
        questionElement.innerHTML = `<p class="question-text">${q.question}</p>`;
        const optionsElement = document.createElement('div');
        optionsElement.classList.add('options');
        q.options.forEach((opt, optIndex) => {
          const option = document.createElement('input');
          option.type = 'radio';
          option.name = `question${index}`;
          option.value = optIndex;
          option.id = `question${index}-option${optIndex}`;
          option.classList.add('option-input'); // Add class for styling
          optionsElement.appendChild(option);
          const label = document.createElement('label');
          label.htmlFor = `question${index}-option${optIndex}`;
          label.textContent = opt;
          label.classList.add('option-label'); // Add class for styling
          optionsElement.appendChild(label);
          optionsElement.appendChild(document.createElement('br'));
        });
        questionElement.appendChild(optionsElement);
        questionsContainer.appendChild(questionElement);
      });
    }


    function startTimer() {
      const countdownElement = document.getElementById('countdown');
      const timer = setInterval(() => {
        if (timeLeft <= 0) {
          clearInterval(timer);
          document.getElementById('submit').click(); // Tự động nộp bài khi hết giờ
        } else {
          countdownElement.textContent = formatTime(timeLeft);
          timeLeft--;
        }
      }, 1000);
    }

    function formatTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
    }
    function goBack() {
      window.location.href = "mainpage.html";
    }
    // let examData = [];
    // Xử lý khi nộp bài, kiểm tra câu trả lời và hiển thị thông báo
    function submit() {
      document.getElementById('result').style.display = 'block'; // Show the result div
      clearInterval(timer); // Dừng đếm ngược
      let correctAnswers = 0;
      const answers = document.querySelectorAll('input[type="radio"]:checked');
      answers.forEach(answer => {
        const questionIndex = answer.name.replace('question', '');
        const selectedOptionIndex = parseInt(answer.value);

        // if (selectedOptionIndex === questions[questionIndex].answer) {
        //   correctAnswers++;
        // }
        // examData.push([questionIndex, selectedOptionIndex]);
        localStorage.setItem(questionIndex,selectedOptionIndex);
      });
      window.location.href = "resultpage.html";
      
    }

    renderQuestions();
    startTimer();
  </script>
</body>

</html>